{"version":3,"sources":["../src/string.ts","../src/number.ts","../src/array.ts","../src/object.ts","../src/boolean.ts","../src/context.ts","../src/index.ts"],"names":["validate","self","data","validator","errors","value","result","string","defaultValue","msg","valid","values","min","max","length","pattern","number","array","items","v","_data","object","props","keys","failedKeys","key","_errors","err","boolean","get","target","set","ctx","api","fluent"],"mappings":"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","file":"index.cjs","sourcesContent":["import { Context } from \"./types\";\n\nfunction validate (self: Context, data: any, validator: ({ value }: { value: any }) => { valid: boolean, error: string | null }) {\n  if (!self.validate)\n    throw new Error(\"validate is not defined in context\");\n\n  const errors = self.validate.get(\"errors\", data, []);\n  self.validate.set(\"errors\", data, errors);\n  self.validate.set(\"valid\", data, errors.length === 0);\n\n  const value = self.validate.get(\"value\", data) as any;\n  if (typeof value !== \"string\") {\n    self.validate.set(\"valid\", data, false);\n    if (!errors.includes(\"invalid string\")) {\n      errors.push(\"invalid string\");\n      self.validate.set(\"errors\", data, errors);\n    }\n    return data;\n  }\n\n  const result = validator({ value });\n  if (!result.valid) {\n    self.validate.set(\"valid\", data, false);\n    errors.push(result.error);\n    self.validate.set(\"errors\", data, errors);\n  }\n\n  return data;\n}\n\nexport const string = {\n  coerce(this: Context, data: any) {\n    if (!this.validate)\n      throw new Error(\"validate is not defined in context\");\n\n    try {\n      this.validate.set(\"value\", data, data.value.toString());\n    } catch (e) {}\n\n    return validate(this, data, () => {\n      return { valid: true, error: null };\n    });\n  },\n  default(this: Context, data: any, defaultValue: string) {\n    if (!this.validate)\n      throw new Error(\"validate is not defined in context\");\n\n    const value = this.validate.get(\"value\", data, null);\n    if (value === undefined || value === null) {\n      this.validate.set(\"value\", data, defaultValue);\n    }\n\n    return validate(this, data, () => {\n      return { valid: true, error: null };\n    });\n  },\n  required(this: Context, data: any, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = !!(value && value.length > 0);\n      return { valid, error: valid ? null : msg || \"string is required\" };\n    });\n  },\n  enum(this: Context, data: any, values: string[], msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = values.includes(value);\n      return { valid, error: valid ? null : msg || \"invalid value\" };\n    });\n  },\n  min(this: Context, data: any, min: number, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = !!(value && value.length >= min);\n      return { valid, error: valid ? null : msg || `too short - min length ${min}` };\n    });\n  },\n  max(this: Context, data: any, max: number, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = !!(value && value.length <= max);\n      return { valid, error: valid ? null : msg || `too long - max length ${max}` };\n    });\n  },\n  length(this: Context, data: any, length: number, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = !!(value && value.length === length);\n      return { valid, error: valid ? null : msg || `invalid length - length ${length}` };\n    });\n  },\n  match(this: Context, data: any, pattern: string, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = new RegExp(pattern).test(value);\n      return { valid, error: valid ? null : msg || \"invalid pattern\" };\n    });\n  }\n}\n","import { Context } from \"./types\";\n\nfunction validate (self: Context, data: any, validator: ({ value }: { value: any }) => { valid: boolean, error: string | null }) {\n  if (!self.validate) \n    throw new Error(\"validate is not defined in context\");\n\n  const errors = self.validate.get(\"errors\", data, []);\n  self.validate.set(\"errors\", data, errors);\n  self.validate.set(\"valid\", data, errors.length === 0);\n\n  const value = self.validate.get(\"value\", data) as number;\n  if (typeof value !== \"number\") {\n    self.validate.set(\"valid\", data, false);\n    if (!errors.includes(\"invalid number\")) {\n      errors.push(\"invalid number\");\n      self.validate.set(\"errors\", data, errors);\n    }\n    return data;\n  }\n\n  const result = validator({ value });\n  if (!result.valid) {\n    self.validate.set(\"valid\", data, false);\n    errors.push(result.error);\n    self.validate.set(\"errors\", data, errors);\n  }\n\n  return data;\n}\n\nexport const number = {\n  coerce(this: Context, data: any) {\n    if (!this.validate) throw new Error(\"validate is not defined in context\");\n\n    try {\n      const value = this.validate.get(\"value\", data, 0);\n      this.validate.set(\"value\", data, Number(value));\n    } catch (e) {}\n\n    return validate(this, data, () => {\n      return { valid: true, error: null };\n    });\n  },\n  default(this: Context, data: any, defaultValue: number) {\n    if (!this.validate) throw new Error(\"validate is not defined in context\");\n\n    const value = this.validate.get(\"value\", data, null);\n    if (value === undefined || value === null) {\n      this.validate.set(\"value\", data, defaultValue);\n    }\n    \n    return validate(this, data, () => {\n      return { valid: true, error: null };\n    });\n  },\n  required(this: Context, data: any, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = value !== undefined && value !== null;\n      return { valid, error: valid ? null : msg || \"number is required\" };\n    });\n  },\n  enum(this: Context, data: any, values: number[], msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = values.includes(value);\n      return { valid, error: valid ? null : msg || \"invalid value\" };\n    });\n  },\n  min(this: Context, data: any, min: number, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = value >= min;\n      return { valid, error: valid ? null : msg || `too small - min value ${min}` };\n    });\n  },\n  max(this: Context, data: any, max: number, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = value <= max;\n      return { valid, error: valid ? null : msg || `too large - max value ${max}` };\n    });\n  },\n  integer(this: Context, data: any, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = Number.isInteger(value);\n      return { valid, error: valid ? null : msg || \"invalid integer\" };\n    });\n  }\n}\n","import { AnyPtrRecord } from \"dns\";\nimport { Context } from \"./types\";\n\nfunction validate(\n  self: Context,\n  data: any,\n  validator: ({ value }: { value: any }) => {\n    valid: boolean;\n    error: string | null;\n  }\n) {\n  if (!self.validate) throw new Error(\"validate is not defined in context\");\n\n  const errors = self.validate.get(\"errors\", data, []);\n  self.validate.set(\"errors\", data, errors);\n  self.validate.set(\"valid\", data, errors.length === 0);\n\n  const value = self.validate.get(\"value\", data) as any;\n  if (!Array.isArray(value)) {\n    self.validate.set(\"valid\", data, false);\n    if (!errors.includes(\"invalid array\")) {\n      errors.push(\"invalid array\");\n      self.validate.set(\"errors\", data, errors);\n    }\n    return data;\n  }\n\n  const result = validator({ value });\n  if (!result.valid) {\n    self.validate.set(\"valid\", data, false);\n    errors.push(result.error);\n    self.validate.set(\"errors\", data, errors);\n  }\n\n  return data;\n}\n\nexport const array = {\n  coerce(this: Context, data: AnyPtrRecord) {\n    if (!this.validate) throw new Error(\"validate is not defined in context\");\n\n    try {\n      this.validate.set(\"value\", data, JSON.parse(data.value));\n    } catch (e) {}\n\n    return validate(this, data, () => {\n      return { valid: true, error: null };\n    });\n  },\n  default(this: Context, data: any, defaultValue: any[]) {\n    if (!this.validate) throw new Error(\"validate is not defined in context\");\n\n    const value = this.validate.get(\"value\", data);\n    if (value === undefined || value === null) {\n      this.validate.set(\"value\", data, defaultValue);\n    }\n\n    return validate(this, data, () => {\n      return { valid: true, error: null };\n    });\n  },\n  required(this: Context, data: any, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = value && value.length > 0;\n      return { valid, error: valid ? null : msg || \"array is required\" };\n    });\n  },\n  min(this: Context, data: any, min: number, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = value && value.length >= min;\n      return {\n        valid,\n        error: valid ? null : msg || `too short - min length ${min}`,\n      };\n    });\n  },\n  max(this: Context, data: any, max: number, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = value && value.length <= max;\n      return {\n        valid,\n        error: valid ? null : msg || `too long - max length ${max}`,\n      };\n    });\n  },\n  items(this: Context, data: any, items: any, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid =\n        value &&\n        value.every((v: any) => {\n          if (!this.validate)\n            throw new Error(\"validate is not defined in context\");\n\n          const _data = {};\n          this.validate.set(\"value\", _data, v);\n\n          return items.run(_data).valid;\n        });\n      return {\n        valid,\n        error: valid\n          ? null\n          : msg ||\n            `invalid items - expected ${items.chain[0].method.split(\".\")[0]}`,\n      };\n    });\n  },\n};\n","import { Context } from \"./types\";\n\nfunction validate (self: Context, data: any, validator: ({ value }: { value: any }) => { valid: boolean, error: string | null }) {\n  if (!self.validate) \n    throw new Error(\"validate is not defined in context\");\n\n  const errors = self.validate.get(\"errors\", data, []);\n  self.validate.set(\"errors\", data, errors);\n  self.validate.set(\"valid\", data, errors.length === 0);\n\n  const value = self.validate.get(\"value\", data) as any;\n  if (typeof value !== \"object\" || value === null) {\n    self.validate.set(\"valid\", data, false);\n    if (!errors.includes(\"invalid object\")) {\n      errors.push(\"invalid object\");\n      self.validate.set(\"errors\", data, errors);\n    }\n    return data;\n  }\n\n  const result = validator({ value });\n  if (!result.valid) {\n    self.validate.set(\"valid\", data, false);\n    errors.push(result.error);\n    self.validate.set(\"errors\", data, errors);\n  }\n\n  return data;\n}\n\nexport const object = {\n  coerce(this: Context, data: any) {\n    if (!this.validate) \n      throw new Error(\"validate is not defined in context\");\n\n    try {\n      this.validate.set(\"value\", data, JSON.parse(data.value));\n    } catch (e) {}\n\n    return validate(this, data, () => {\n      return { valid: true, error: null };\n    });\n  },\n  default(this: Context, data: any, defaultValue: Record<string, any>) {\n    if (!this.validate) \n      throw new Error(\"validate is not defined in context\");\n\n    const value = this.validate.get(\"value\", data, null);\n    if (value === undefined || value === null) {\n      this.validate.set(\"value\", data, defaultValue);\n    }\n\n    return validate(this, data, () => {\n      return { valid: true, error: null };\n    });\n  },\n  required(this: Context, data: any, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = value && Object.keys(value).length > 0;\n      return { valid, error: valid ? null : msg || \"object is required\" };\n    });\n  },\n  props(this: Context, data: any, props: Record<string, any>, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const keys = Object.keys(props);\n      let valid = true;\n      let failedKeys: string[] = [];\n\n      if (!this.validate)\n        throw new Error(\"validate is not defined in context\");\n\n      for (const key of keys) {\n        const validator = props[key];\n        const _data = {};\n        const errors = this.validate.get(\"errors\", _data, []);\n        this.validate.set(\"value\", _data, value[key]);\n\n        const result = validator.run(_data);\n        if (!result.valid) {\n          valid = false;\n          const _errors = this.validate.get(\"errors\", result, []);\n          errors.push(..._errors.map((err: string) => `${key}: ${err}`));\n          failedKeys.push(key);\n        }\n      }\n      if (!valid) {\n        const error = msg || failedKeys.length ? `invalid props - ${failedKeys.join(\", \")}` : \"\";\n        return { valid: false, error };\n      }\n      return { valid: true, error: null };\n    });\n  }\n}","import { Context } from \"./types\";\n\nfunction validate (self: Context, data: any, validator: ({ value }: { value: any }) => { valid: boolean, error: string | null }) {\n  if (!self.validate) \n    throw new Error(\"validate is not defined in context\");\n\n  const errors = self.validate.get(\"errors\", data, []);\n  self.validate.set(\"errors\", data, errors);\n  self.validate.set(\"valid\", data, errors.length === 0);\n\n  const value = self.validate.get(\"value\", data) as boolean;\n  if (typeof value !== \"boolean\") {\n    self.validate.set(\"valid\", data, false);\n    if (!errors.includes(\"invalid boolean\")) {\n      errors.push(\"invalid boolean\");\n      self.validate.set(\"errors\", data, errors);\n    }\n    return data;\n  }\n\n  const result = validator({ value });\n  if (!result.valid) {\n    self.validate.set(\"valid\", data, false);\n    errors.push(result.error);\n    self.validate.set(\"errors\", data, errors);\n  }\n\n  return data;\n}\n\nexport const boolean = {\n  coerce(this: Context, data: any) {\n    if (!this.validate) throw new Error(\"validate is not defined in context\");\n\n    try {\n      const value = this.validate.get(\"value\", data, false);\n      this.validate.set(\"value\", data, Boolean(value));\n    } catch (e) {}\n\n    return validate(this, data, () => {\n      return { valid: true, error: null };\n    });\n  },\n  default(this: Context, data: any, defaultValue: boolean) {\n    if (!this.validate) throw new Error(\"validate is not defined in context\");\n\n    const value = this.validate.get(\"value\", data, null);\n    if (value === undefined || value === null) {\n      this.validate.set(\"value\", data, defaultValue);\n    }\n    \n    return validate(this, data, () => {\n      return { valid: true, error: null };\n    });\n  },\n  required(this: Context, data: any, msg: string = \"\") {\n    return validate(this, data, ({ value }) => {\n      const valid = value !== undefined && value !== null;\n      return { valid, error: valid ? null : msg || \"boolean is required\" };\n    });\n  }\n};","import { Context } from './types';\n\nexport function get(target: 'value' | 'valid' | 'errors', data: any, defaultValue?: any) {\n  data[target] = data[target] || defaultValue;\n  return data[target];\n}\n\nexport function set(target: 'value' | 'valid' | 'errors', data: any, value: any) {\n  data[target] = value;\n  return data;\n}\n\nexport const ctx: Context = {\n  validate: { \n    set,\n    get,\n  }\n};","import { Fluent, fluent } from \"fluent\";\nimport { string } from \"./string\";\nimport { number } from \"./number\";\nimport { array } from \"./array\";\nimport { object } from \"./object\";\nimport { boolean } from \"./boolean\";\nimport type { Infer } from \"./types\";\nimport { ctx } from \"./context\";\n\nexport type Api = {\n  string: typeof string;\n  number: typeof number;\n  array: typeof array;\n  object: typeof object;\n  boolean: typeof boolean;\n};\n\nexport const api: Api = {\n  string,\n  number,\n  array,\n  object,\n  boolean,\n};\n\nexport const validate = fluent({ api, ctx }) as Fluent<Api, Api, []>;\n\nexport { Infer, ctx };"]}